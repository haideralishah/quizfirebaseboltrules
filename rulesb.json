{
  "rules": {
    "rules": {
      "user-question-banks": {
        "$Userid": {
          "$questionBankUniqueID": {
            ".validate": "newData.hasChildren(['member-type'])",
            "member-type": {
              ".validate": "newData.isNumber() && (newData.val() == 1 || newData.val() == 2)"
            },
            "$other": {
              ".validate": "false"
            }
          }
        }
      },
      "question-bank-memberships": {
        "$questionBankUniqueID": {
          "$UserID": {
            ".validate": "newData.hasChildren(['member-type'])",
            "member-type": {
              ".validate": "newData.isNumber() && (newData.val() == 1 || newData.val() == 2)"
            },
            "$other": {
              ".validate": "false"
            }
          }
        }
      },
      "question-bank": {
        "$questionBankUniqueID": {
          ".validate": "newData.hasChildren(['timestamp', 'title', 'desc'])",
          "timestamp": {
            ".validate": "newData.isNumber() && newData.val() <= Date.now"
          },
          "title": {
            ".validate": "newData.isString()"
          },
          "desc": {
            ".validate": "newData.isString()"
          },
          "$other": {
            ".validate": "false"
          }
        }
      },
      "question-bank-topics": {
        "$questionBankUniqueID": {
          "$autotopicid": {
            "subtopics": {
              "$autoSubTopicID": {
                ".validate": "newData.hasChildren(['timestamp', 'title', 'desc', 'questions'])",
                "timestamp": {
                  ".validate": "newData.isNumber() && newData.val() <= Date.now"
                },
                "title": {
                  ".validate": "newData.isString()"
                },
                "desc": {
                  ".validate": "newData.isString()"
                },
                "questions": {
                  ".validate": "newData.hasChildren()",
                  "$questions": {
                    ".validate": "newData.isBoolean()"
                  }
                },
                "$other": {
                  ".validate": "false"
                }
              },
              ".validate": "newData.hasChildren(['autoSubTopicID'])"
            },
            "questions": {
              "$questions": {
                ".validate": "newData.isBoolean()"
              },
              ".validate": "newData.hasChildren()"
            },
            ".validate": "newData.hasChildren(['timestamp', 'title', 'desc', 'subtopics', 'questions'])",
            "timestamp": {
              ".validate": "newData.isNumber() && newData.val() <= Date.now"
            },
            "title": {
              ".validate": "newData.isString()"
            },
            "desc": {
              ".validate": "newData.isString()"
            },
            "$other": {
              ".validate": "false"
            }
          }
        }
      },
      "question-bank-quizes": {
        "$questionBankID": {
          "$quizID": {
            ".validate": "newData.isBoolean()"
          },
          ".validate": "newData.hasChildren(['quizID'])"
        }
      },
      "group-quizes": {
        "$groupID": {
          "$quizID": {
            ".validate": "newData.isBoolean()"
          },
          ".validate": "newData.hasChildren(['quizID'])"
        }
      },
      "quizes": {
        "$quizID": {
          ".validate": "newData.hasChildren(['title', 'desc', 'duration', 'num-questions'])",
          "title": {
            ".validate": "newData.isString()"
          },
          "desc": {
            ".validate": "newData.isString()"
          },
          "duration": {
            ".validate": "newData.isNumber()"
          },
          "num-questions": {
            ".validate": "newData.isNumber()"
          },
          "$other": {
            ".validate": "false"
          }
        }
      },
      "quiz-topics": {
        "$quizID": {
          "$autotopicID": {
            "subtopics": {
              "$autoSubTopicID": {
                ".validate": "newData.hasChildren(['timestamp', 'title', 'desc', 'questions'])",
                "timestamp": {
                  ".validate": "newData.isNumber() && newData.val() <= Date.now"
                },
                "title": {
                  ".validate": "newData.isString()"
                },
                "desc": {
                  ".validate": "newData.isString()"
                },
                "questions": {
                  ".validate": "newData.hasChildren()",
                  "$questions": {
                    ".validate": "newData.isBoolean()"
                  }
                },
                "$other": {
                  ".validate": "false"
                }
              },
              ".validate": "newData.hasChildren(['autoSubTopicID'])"
            },
            "questions": {
              "$questions": {
                ".validate": "newData.isBoolean()"
              },
              ".validate": "newData.hasChildren()"
            },
            ".validate": "newData.hasChildren(['timestamp', 'title', 'desc', 'subtopics', 'questions'])",
            "timestamp": {
              ".validate": "newData.isNumber() && newData.val() <= Date.now"
            },
            "title": {
              ".validate": "newData.isString()"
            },
            "desc": {
              ".validate": "newData.isString()"
            },
            "$other": {
              ".validate": "false"
            }
          }
        }
      },
      "quiz-questions": {
        "$quizID": {
          "$questionID": {
            ".validate": "newData.hasChildren(['title', 'type', 'desc', 'options'])",
            "title": {
              ".validate": "newData.isString()"
            },
            "type": {
              ".validate": "newData.isNumber() && (newData.val() == 1 || newData.val() == 2 || newData.val() == 3)"
            },
            "desc": {
              ".validate": "newData.isString()"
            },
            "options": {
              ".validate": "newData.hasChildren()"
            },
            "$other": {
              ".validate": "false"
            }
          }
        }
      },
      "quiz-answers": {
        "$quizID": {
          "$questionID": {
            "options": {
              "$optionID": {
                ".validate": "newData.hasChildren(['html', 'correct', 'discussion-html'])",
                "html": {
                  ".validate": "newData.isString()"
                },
                "correct": {
                  ".validate": "newData.isBoolean()"
                },
                "discussion-html": {
                  ".validate": "newData.isString()"
                },
                "$other": {
                  ".validate": "false"
                }
              },
              ".validate": "newData.hasChildren(['optionID'])"
            },
            ".validate": "newData.hasChildren(['title', 'type', 'desc-html', 'discussion-html', 'options'])",
            "title": {
              ".validate": "newData.isString()"
            },
            "type": {
              ".validate": "newData.isNumber() && (newData.val() == 1 || newData.val() == 2 || newData.val() == 3)"
            },
            "desc-html": {
              ".validate": "newData.isString()"
            },
            "discussion-html": {
              ".validate": "newData.isString()"
            },
            "$other": {
              ".validate": "false"
            }
          }
        }
      },
      "$groupid": {
        "$quizid": {
          "$userid": {
            "$questionID": {
              ".validate": "newData.hasChildren(['optionID', 'correct'])",
              "optionID": {
                ".validate": "newData.isBoolean()"
              },
              "correct": {
                ".validate": "newData.isBoolean()"
              },
              "$other": {
                ".validate": "false"
              }
            }
          }
        }
      }
    }
  }
}
